def result = 'YES'

pipeline {
    agent any

    environment {

        FOO = "BAR"

    }

    triggers {
        cron('H/2 * * * *')
    }

    parameters {
        booleanParam(defaultValue: true, description: '', name: 'override_prompts')
    }

    stages {

        stage('Give a choice') {
            when { expression { return !params.override_prompts } }
            steps {
                 script {
                    result = input(message: 'Choose the playbooks to run', parameters: [
                        booleanParam(defaultValue: true, description: '', name: 'backend_services'),
                        booleanParam(defaultValue: true, description: '', name: 'archivist_and_database_setup'),
                        booleanParam(defaultValue: true, description: '', name: 'self_serve'),
                        booleanParam(defaultValue: true, description: '', name: 'remaining')
                    ])
                 }
            }
        }

        stage('Example shell script') {
            steps {
                sh 'echo "WOO"'
                echo "The result is " + result
                echo "The result also is ${result}"
                sh "echo ${result}"
                sh "echo ${FOO}"
            }
        }
    }

}
